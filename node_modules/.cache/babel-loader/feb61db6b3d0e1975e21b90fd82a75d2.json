{"ast":null,"code":"import axios from 'axios';\nimport { LOGIN_SUCCSESS, SET_CURRENT_USER } from '../types';\nimport jwt_decode from 'jwt-decode';\nimport setAuthToken from '../utils/setAuthToken';\nexport const userLogin = loginData => dispatch => {\n  axios.post(\"user/login\", loginData).then(res => {\n    dispatch({\n      type: LOGIN_SUCCSESS,\n      payload: res.data\n    }); // Save to localStorage\n    // Set token to localStorage\n\n    const token = res.data.token;\n    localStorage.setItem(\"jwtToken\", token); // Set token to Auth header\n\n    setAuthToken(token); // Decode token to get user data\n\n    const decoded = jwt_decode(token); // Set current user\n\n    dispatch(setCurrentUser(decoded));\n  }).catch(err => console.log(err));\n}; // Set logged in user\n\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n}; // export const userLogin = (loginData,history) => async dispatch => {\n//    try {\n//        const res = await axios.post('user/login',loginData);\n// // console.log(res);\n//        dispatch({\n//            type:LOGIN_SUCCSESS,\n//            payload:res.data\n//        })\n//        dispatch((\n//            history.push('./FriendList')\n//        ))\n//    } catch (error) {\n//        console.log(error);\n//    } \n// }","map":{"version":3,"sources":["/home/sumit/Desktop/cmf/src/store/actions/loginAction.js"],"names":["axios","LOGIN_SUCCSESS","SET_CURRENT_USER","jwt_decode","setAuthToken","userLogin","loginData","dispatch","post","then","res","type","payload","data","token","localStorage","setItem","decoded","setCurrentUser","catch","err","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,cAAR,EAAwBC,gBAAxB,QAA+C,UAA/C;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AAEA,OAAO,MAAMC,SAAS,GAAGC,SAAS,IAAIC,QAAQ,IAAI;AAC9CP,EAAAA,KAAK,CACFQ,IADH,CACQ,YADR,EACsBF,SADtB,EAEGG,IAFH,CAEQC,GAAG,IAAI;AACXH,IAAAA,QAAQ,CAAC;AACPI,MAAAA,IAAI,EAAEV,cADC;AAEPW,MAAAA,OAAO,EAAEF,GAAG,CAACG;AAFN,KAAD,CAAR,CADW,CAKX;AAEA;;AAPW,UAQHC,KARG,GAQOJ,GAAG,CAACG,IARX,CAQHC,KARG;AASXC,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,KAAjC,EATW,CAUX;;AACAV,IAAAA,YAAY,CAACU,KAAD,CAAZ,CAXW,CAYX;;AACA,UAAMG,OAAO,GAAGd,UAAU,CAACW,KAAD,CAA1B,CAbW,CAcX;;AACAP,IAAAA,QAAQ,CAACW,cAAc,CAACD,OAAD,CAAf,CAAR;AACD,GAlBH,EAmBGE,KAnBH,CAmBSC,GAAG,IACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CApBF;AAsBD,CAvBI,C,CA0BL;;AACF,OAAO,MAAMF,cAAc,GAAGD,OAAO,IAAI;AACrC,SAAO;AACLN,IAAAA,IAAI,EAAET,gBADD;AAELU,IAAAA,OAAO,EAAEK;AAFJ,GAAP;AAID,CALI,C,CAQP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AAEA","sourcesContent":["import axios from 'axios';\nimport {LOGIN_SUCCSESS, SET_CURRENT_USER} from '../types'\nimport jwt_decode from 'jwt-decode';\nimport setAuthToken from '../utils/setAuthToken';\n\nexport const userLogin = loginData => dispatch => {\n    axios\n      .post(\"user/login\", loginData)\n      .then(res => {\n        dispatch({\n          type: LOGIN_SUCCSESS,\n          payload: res.data\n        });\n        // Save to localStorage\n  \n        // Set token to localStorage\n        const { token } = res.data;\n        localStorage.setItem(\"jwtToken\", token);\n        // Set token to Auth header\n        setAuthToken(token);\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n        // Set current user\n        dispatch(setCurrentUser(decoded));\n      })\n      .catch(err =>\n      console.log(err)\n      );\n  };\n  \n\n  // Set logged in user\nexport const setCurrentUser = decoded => {\n    return {\n      type: SET_CURRENT_USER,\n      payload: decoded\n    };\n  };\n  \n\n// export const userLogin = (loginData,history) => async dispatch => {\n    \n//    try {\n//        const res = await axios.post('user/login',loginData);\n// // console.log(res);\n//        dispatch({\n//            type:LOGIN_SUCCSESS,\n//            payload:res.data\n//        })\n\n//        dispatch((\n//            history.push('./FriendList')\n//        ))\n\n\n//    } catch (error) {\n//        console.log(error);\n//    } \n\n// }"]},"metadata":{},"sourceType":"module"}